(this["webpackJsonpdinnerplanner-html-react"]=this["webpackJsonpdinnerplanner-html-react"]||[]).push([[0],{22:function(e,t,a){e.exports=a(41)},27:function(e,t,a){},33:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(19),c=a.n(r),i=a(7),l=a(1),o=a(2),u=a(4),m=a(3),d=a(5),h=a(11),b=(a(27),function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"Welcome avenir tc fw5"},s.a.createElement("h3",{className:"avenir tc fw5"},"Welcome to dinner planner, you can choose what you want online and we will show you the details of every dishes you'd like to know!"),s.a.createElement("h3",{className:"avenir tc fw5"},"Press the button and start to plan your dinner!"),s.a.createElement(i.b,{to:"/search",id:"welcome-link",className:"f4  no-underline black hover-bg-black hover-white inline-flex items-center pa2 ba border-box"},"Start Planning"))}}]),t}(n.Component)),p="http://sunset.nada.kth.se:8080/iprog/group/61",v={method:"GET",headers:{"X-Mashape-Key":"3d2a031b4cmsh5cd4e7b939ada54p19f679jsn9a775627d767"}},f=new(function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this)))._numberOfGuests=2,e.getNumberOfGuests(),e.currentDish=void 0,e.currentId=void 0,e.selectedDish=new Array,e.selectedId=new Array,e}return Object(d.a)(t,e),Object(o.a)(t,[{key:"getNumberOfGuests",value:function(){return this._numberOfGuests}},{key:"setNumberOfGuests",value:function(e){this._numberOfGuests=e,this.notifyObservers()}},{key:"getIngredients",value:function(e){return e?e.extendedIngredients.map((function(e){return{name:e.name}})):void 0}},{key:"addDishToMenu",value:function(){this.selectedId.push(this.currentId),this.selectedDish.push(this.currentDish),this.notifyObservers()}},{key:"removeDishFromMenu",value:function(e){this.selectedDish=this.selectedDish.filter((function(t){return t.id!=e})),this.notifyObservers()}},{key:"getDishPrice",value:function(e){return e.pricePerServing}},{key:"getTotalMenuPrice",value:function(){var e=this;return 0==this.selectedDish.length?0:this.selectedDish.map((function(t){return e.getDishPrice(t)})).reduce((function(e,t){return e+t}))}},{key:"getAllDishes",value:function(e,t){var a="".concat(p,"/recipes/search?number=").concat(15,"&offset=").concat(0,"&query=").concat(t,"&type=").concat(e);return fetch(a,v).then(this.processResponse)}},{key:"getDish",value:function(e){var t="".concat(p,"/recipes/").concat(e,"/information");return fetch(t,v).then(this.processResponse)}},{key:"processResponse",value:function(e){if(e.ok)return e.json();throw e}},{key:"setId",value:function(e){this.currentId=e,this.notifyObservers()}},{key:"setCurrent",value:function(e,t){this.currentId=e,this.currentDish=t,this.notifyObservers()}},{key:"setSelected",value:function(e){this.selectedDish=e}}]),t}(function(){function e(){Object(l.a)(this,e),this._observers=[]}return Object(o.a)(e,[{key:"addObserver",value:function(e){this._observers.push(e)}},{key:"notifyObservers",value:function(e){var t=this;this._observers.forEach((function(a){a.update(t,e)}))}},{key:"removeObserver",value:function(e){this._observers=this._observers.filter((function(t){return t!==e}))}}]),e}())),E=(a(33),{set:function(e,t){localStorage.setItem(e,JSON.stringify(t))},get:function(e){return JSON.parse(localStorage.getItem(e))},remove:function(e){return localStorage.removeItem(e)}}),y=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).onNumberOfGuestsChanged=function(e){a.props.model.setNumberOfGuests(e.target.value),E.set("numberOfGuests",e.target.value)},a.state={display_name:"block",numberOfGuests:a.props.model.getNumberOfGuests(),selectedDish:a.props.model.selectedDish},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=E.get("numberOfGuests"),t=E.get("selectedDish");e&&t&&(f.setNumberOfGuests(e),f.setSelected(t),this.setState({numberOfGuests:e,selectedDish:t})),this.props.model.addObserver(this)}},{key:"componentWillUnmount",value:function(){this.props.model.removeObserver(this)}},{key:"update",value:function(){this.setState({numberOfGuests:this.props.model.getNumberOfGuests(),selectedDish:this.props.model.selectedDish})}},{key:"removeMenuClick",value:function(e){f.removeDishFromMenu(e),E.set("selectedDish",f.selectedDish)}},{key:"display_name",value:function(){"none"==this.state.display_name?this.setState({display_name:"block"}):"block"==this.state.display_name&&this.setState({display_name:"none"})}},{key:"render",value:function(){var e=this,t=this.state.numberOfGuests,a="People: ".concat(t,", Total price: ").concat((f.getTotalMenuPrice()*t).toFixed(2)),n=0,r=f.selectedDish.map((function(a){return n++,s.a.createElement("tr",{key:n},s.a.createElement("td",{className:"v-mid fw4 avenir tc pv3 pr3 bb b--black-20"},a.title),s.a.createElement("td",{className:"v-mid fw4 avenir tc pv3 pr3 bb b--black-20"},(a.pricePerServing*t).toFixed(2)),s.a.createElement("td",{className:"v-mid fw4 avenir tc pv3 pr3 bb b--black-20",onClick:function(){e.removeMenuClick(a.id)}},"delete"))}));return s.a.createElement("div",{className:"Sidebar fl w-third-l w-100 w-50-m pa2 center"},s.a.createElement("h3",{className:"tc avenir"},"My Dinner"),s.a.createElement("p",{className:"center avenir tc"},"People:",s.a.createElement("input",{type:"number",value:this.state.numberOfGuests,onChange:this.onNumberOfGuestsChanged})),s.a.createElement("a",{className:"hide-bar avenir tc flex items-center justify-center pa1 bg-lightest-blue navy",onClick:this.display_name.bind(this)}," hide"),s.a.createElement("div",{className:"pa4 table-sidebar",style:{display:this.state.display_name}},s.a.createElement("div",{className:"overflow-auto"},s.a.createElement("table",{className:"f6 w-100 mw8 center",cellSpacing:"0"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",{className:"fw6 avenir tc bb b--black-20 tl pv3 pr3 bg-white"},"Name"),s.a.createElement("th",{className:"fw6 avenir tc bb b--black-20 tl pv3 pr3 bg-white"},"Quantity"),s.a.createElement("th",{className:"fw6 avenir tc bb b--black-20 tl pv3 pr3 bg-white"},"Modify"))),s.a.createElement("tbody",{className:"lh-copy"},r),s.a.createElement("caption",{className:"pa2 fw6 avenir tc bb b--black-20 tl bg-white"},a)))),s.a.createElement("div",{className:"checkout-btn tc center"},s.a.createElement(i.b,{className:"avenir f5 no-underline black bg-animate hover-bg-black hover-white inline-flex items-center pa2 ba border-box",to:"/menuOverview"},"checkout")))}}]),t}(n.Component),k=(a(34),function(e){function t(e){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).call(this,e))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"items-center search-bar"},s.a.createElement("input",{type:"text",placeholder:"Search food here...",value:this.props.keyword,className:"avenir",onChange:function(t){return e.props.onKeywordChange(t.target.value)}}),s.a.createElement("select",{value:this.props.type,className:"avenir",onChange:function(t){return e.props.onTypeChange(t.target.value)}},s.a.createElement("option",{value:"all"},"All"),s.a.createElement("option",{value:"main course"},"main course"),s.a.createElement("option",{value:"dessert"},"dessert"),s.a.createElement("option",{value:"side dish"},"side dish"),s.a.createElement("option",{value:"dessert"},"dessert"),s.a.createElement("option",{value:"appetizer"},"appetizer"),s.a.createElement("option",{value:"salad"},"salad"),s.a.createElement("option",{value:"bread"},"bread"),s.a.createElement("option",{value:"breakfast"},"breakfast"),s.a.createElement("option",{value:"soup"},"soup"),s.a.createElement("option",{value:"beverage"},"beverage"),s.a.createElement("option",{value:"sauce"},"sauce"),s.a.createElement("option",{value:"drink"},"drink")),s.a.createElement("a",{className:"avenir f6 lf5 no-underline black bg-animate hover-bg-black hover-white inline-flex items-center pa1 ba border-box",onClick:function(){e.props.onBtnClick()}},"search"))}}]),t}(n.Component)),O=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={status:"LOADING",dishType:"all",keyWord:""},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;f.getAllDishes(this.state.dishType,this.state.keyWord).then((function(t){e.setState({status:"LOADED",dishes:t.results,baseUri:t.baseUri})})).catch((function(){e.setState({status:"ERROR"})}))}},{key:"itemClick",value:function(e){f.setId(e),console.log(f.currentId)}},{key:"render",value:function(){var e=this,t=null;switch(this.state.status){case"LOADING":t=s.a.createElement("em",null,"Loading...");break;case"LOADED":t=this.state.dishes.map((function(t){return s.a.createElement("div",{className:"card",key:t.id},s.a.createElement(i.b,{className:"no-underline avenir tc",to:"/dishDetails",onClick:function(){return e.itemClick(t.id)},key:t.id},s.a.createElement("div",{className:"br2 ba dark-gray b--black-10 mw5"},s.a.createElement("img",{src:e.state.baseUri+"/"+t.image,className:"db w-100 br2 br--top"}),s.a.createElement("div",{className:"pa2 ph3-ns pb3-ns"},s.a.createElement("div",{className:"dt w-100 mt1"},s.a.createElement("h1",{className:"f5 fw5 f4-ns mv0"},t.title))))))}));break;default:t=s.a.createElement("b",null,"Failed to load data, please try again")}return s.a.createElement("div",{className:"Dishes fl w-two-thirds w-100 w-50-m pa2 center"},s.a.createElement(k,{type:this.state.dishType,keyword:this.state.keyWord,onTypeChange:function(t){return e.setState({dishType:t})},onKeywordChange:function(t){return e.setState({keyWord:t})},onBtnClick:function(){return e.componentDidMount()}}),s.a.createElement("div",{className:"masonry-cards"},t))}}]),t}(n.Component),w=(a(35),function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"SelectDish flex flex-wrap justify-center"},s.a.createElement(y,{model:this.props.model}),s.a.createElement(O,null))}}]),t}(n.Component)),N=(a(36),function(e,t){localStorage.setItem(e,JSON.stringify(t))}),g=function(e){return JSON.parse(localStorage.getItem(e))},D=function(e){function t(e){var a;Object(l.a)(this,t),a=Object(u.a)(this,Object(m.a)(t).call(this,e));var n=f.currentId;return a.state={status:"LOADING",id:n,numberOfGuests:a.props.model.getNumberOfGuests()},console.log(a.state.numberOfGuests),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;f.getDish(this.state.id).then((function(t){f.setCurrent(e.state.id,t),e.setState({status:"LOADED",dish:t})})).catch((function(){e.setState({status:"ERROR"})})),this.props.model.addObserver(this);var t=g("numberOfGuests"),a=g("selectedDish");t&&a&&(f.setNumberOfGuests(t),f.setSelected(a),this.setState({numberOfGuests:t,selectedDish:a}))}},{key:"componentWillUnmount",value:function(){this.props.model.removeObserver(this)}},{key:"update",value:function(){this.setState({numberOfGuests:this.props.model.getNumberOfGuests()})}},{key:"addMenuClick",value:function(){f.addDishToMenu(),N("selectedDish",f.selectedDish)}},{key:"render",value:function(){var e=this,t=null;switch(this.state.status){case"LOADING":t=s.a.createElement("em",null,"Loading...");break;case"LOADED":var a=this.state.dish,n=0,r=f.getNumberOfGuests(),c=a.extendedIngredients.map((function(e){return n++,s.a.createElement("tr",{key:n},s.a.createElement("td",{className:" v-mid fw4 avenir tc pv3 pr3 bb b--black-20"},e.name),s.a.createElement("td",{className:" v-mid fw4 avenir tc pv3 pr3 bb b--black-20"},e.amount*r),s.a.createElement("td",{className:" v-mid fw4 avenir tc pv3 pr3 bb b--black-20"},e.unit))})),l="Ingredient for ".concat(f.getNumberOfGuests()," People, Price: ").concat((a.pricePerServing*r).toFixed(2));t=s.a.createElement("div",null,s.a.createElement("h1",{className:"tc normal avenir"},a.title),s.a.createElement("img",{src:a.image,className:"db w-50 br2 br--top center"}),s.a.createElement("h4",{className:"fw3 tc avenir"},a.instructions),s.a.createElement("div",{className:"pa4"},s.a.createElement("div",{className:"overflow-auto"},s.a.createElement("table",{className:"f6 w-100 mw8 center",cellSpacing:"0"},s.a.createElement("caption",{className:"pa2 fw6 avenir tc bb b--black-20 tl pb3 pr3 bg-white"},l),s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",{className:" v-mid fw6 avenir tc bb b--black-20 tl pv3 pr3 bg-white"},"Name"),s.a.createElement("th",{className:" v-mid fw6 avenir tc bb b--black-20 tl pv3 pr3 bg-white"},"Quantity"),s.a.createElement("th",{className:" v-mid fw6 avenir tc bb b--black-20 tl pv3 pr3 bg-white"},"Unit"))),s.a.createElement("tbody",{className:"lh-copy"},c)))));break;default:t=s.a.createElement("b",null,"aaaFailed to load data, please try again")}return s.a.createElement("div",{className:"Dishes fl w-two-thirds w-100 w-50-m pa2"},s.a.createElement(i.b,{to:"/search",className:" avenir f5 no-underline black bg-animate hover-bg-black hover-white inline-flex items-center pa3 ba border-box"},"Back to Search"),t,s.a.createElement(i.b,{to:"/search",className:"avenir f5 no-underline black bg-animate hover-bg-black hover-white inline-flex items-center pa3 ba border-box",onClick:function(){return e.addMenuClick()}},"Add to Menu"))}}]),t}(n.Component),j=(a(37),function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"DishDetails flex flex-wrap justify-center"},s.a.createElement(y,{model:this.props.model}),s.a.createElement(D,{model:this.props.model}))}}]),t}(n.Component)),S=(a(38),function(e){function t(e){var a;Object(l.a)(this,t),a=Object(u.a)(this,Object(m.a)(t).call(this,e));var n=f.selectedDish;return a.state={status:"LOADING",dishes:n,display_name:"none"},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"display_name",value:function(){"none"==this.state.display_name?this.setState({display_name:"block"}):"block"==this.state.display_name&&this.setState({display_name:"none"})}},{key:"render",value:function(){var e=this.state.dishes.map((function(e){return s.a.createElement("article",{className:"avenir br2 ba dark-gray b--black-10 mv4 w-100 w-70-m w-30-l mw5",key:e.id},s.a.createElement("img",{src:e.image,className:"db w-100 br2 br--top"}),s.a.createElement("div",{className:"pa2 ph3-ns pb3-ns"},s.a.createElement("div",{className:"dt w-100 mt1"},s.a.createElement("h1",{className:"f5 fw5 tc f4-ns mv0"},e.title))))})),t=this.state.dishes.map((function(e){var t=e.extendedIngredients.map((function(e){return s.a.createElement("h4",{className:"avenir tc fw4"},e.name)}));return s.a.createElement("div",null,s.a.createElement("div",{className:"ph2-ns flex items-center"},s.a.createElement("div",{className:" w-50 w-30-l pa2 center"},s.a.createElement("div",{className:" bg-white pv4"},s.a.createElement("h4",{className:"avenir tc fw6"},e.title),s.a.createElement("img",{src:e.image,className:"db w-100 br2 br--top"}))),s.a.createElement("div",{className:" w-50 w-30-l pa2 center"},s.a.createElement("div",{className:" bg-white pv4"},t))),s.a.createElement("div",{className:" w-100 pa2"},s.a.createElement("div",{className:"tc avenir bg-white pv4"},e.instructions)))})),a=f.getNumberOfGuests(),n="People: ".concat(a,", Total price: ").concat((f.getTotalMenuPrice()*a).toFixed(2));return s.a.createElement("div",{className:"CheckoutView flex flex-wrap justify-center"},s.a.createElement("h3",{className:"avenir fw7 tc w-100"},n),s.a.createElement("div",{className:"center"},s.a.createElement("a",{className:"f5 no-underline black bg-animate hover-bg-black hover-white inline-flex items-center pa3 ba border-box center",onClick:this.display_name.bind(this)},"Show Recipe"),s.a.createElement(i.b,{className:"f5 no-underline black bg-animate hover-bg-black hover-white inline-flex items-center pa3 ba border-box fr",to:"/search"},"Back to Edit")),s.a.createElement("div",{className:"flex justify-center w-100"},e),s.a.createElement("div",{className:"fl w-100 pa2",style:{display:this.state.display_name}},s.a.createElement("div",{className:"mw9 center ph3-ns"},t)))}}]),t}(n.Component)),G=(a(39),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={title:"Dinner Planner"},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement("header",{className:"App-header light-red avenir tc f4 w-100 pa2"},s.a.createElement("h1",{className:"App-title  tc "},this.state.title)),s.a.createElement(h.a,{exact:!0,path:"/",component:b}),s.a.createElement(h.a,{path:"/search",render:function(){return s.a.createElement(w,{model:f})}}),s.a.createElement(h.a,{path:"/dishDetails",render:function(){return s.a.createElement(j,{model:f})}}),s.a.createElement(h.a,{path:"/menuOverview",render:function(){return s.a.createElement(S,{model:f})}}))}}]),t}(n.Component));a(40);c.a.render(s.a.createElement(i.a,null,s.a.createElement(G,null)),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.61e85638.chunk.js.map